<div class="overlay"></div>

<div class="panel-container">
  <div class="panel-header">
    <h2>ðŸ’¬ Chatbot</h2>
    <div class="botones-header">
        <button class="regresar-button" (click)="regresar()">
        <i class="fas fa-arrow-left"></i> Regresar
        </button>
        <button class="actividad-button" (click)="verPerfil()">
        <i class="fas fa-user"></i> Perfil Alumno
        </button>
    </div>
    </div>

  <div class="scroll-box chatbox">
    <!-- âœ… Solo un chatContainer -->
    <div #chatContainer class="chat-window" (scroll)="onScroll()">

      <div *ngFor="let msg of mensajes"
           [ngClass]="{
            'mensaje': true,
            'usuario': msg.emisor === 'usuario',
            'ia': msg.emisor !== 'usuario'
           }">
        <div [innerHTML]="msg.texto"></div>
      </div>

      <!-- Loader -->
      <div *ngIf="cargando" class="mensaje ia escribiendo">
        Escribiendo<span class="puntos">.</span><span class="puntos">.</span><span class="puntos">.</span>
      </div>
    </div>

    <div class="input-chat">
      <input type="text"
             [(ngModel)]="mensajeActual"
             placeholder="Escribe tu mensaje..."
             (keyup.enter)="enviarMensaje()"/>
      <button (click)="enviarMensaje()">
        <i class="fa fa-paper-plane"></i>
      </button>
    </div>
  </div>
</div>
